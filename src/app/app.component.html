<ion-app>
  <ion-menu side="start" contentId="main-content" class="modern-menu">
    <ion-content>
      <div class="menu-header">
        <div class="logo-section">
          <!-- Changed to show user profile photo -->
          <div class="user-profile">
            <ion-avatar *ngIf="userPhotoURL">
              <img [src]="userPhotoURL" alt="Profile Picture">
            </ion-avatar>
            <ion-avatar *ngIf="!userPhotoURL" class="default-avatar">
              <img src="/assets/icon/favicon.png" alt="Default Profile">
            </ion-avatar>
            <div class="user-info">
              <h2>Hi {{ userName }}</h2>
              <p>{{ userRole === 'elderly' ? 'Senior' : (userRole === 'caregiver' ? 'Caregiver' : 'User') }}</p>
            </div>
          </div>
        </div>
        <ion-button fill="clear" (click)="closeMenu()" class="close-button">
          <ion-icon name="arrow-back-outline"></ion-icon>
        </ion-button>
      </div>

      <div class="menu-content">
        <!-- AI Companion Bot Section -->
        <div class="menu-section">
          <h2>AI COMPANION</h2>
          <ion-list lines="none">
            <ion-item button detail="false" (click)="navigateToPage('ai-companion')">
              <ion-icon slot="start" name="chatbubble-ellipses-outline"></ion-icon>
              <ion-label>AI Companion Bot</ion-label>
            </ion-item>
          </ion-list>
        </div>

        <!-- Settings Section -->
        <div class="menu-section">
          <h2>SETTINGS</h2>
          <ion-list lines="none">
            <ion-item button detail="false" (click)="navigateToPage('profile')">
              <ion-icon slot="start" name="person-outline"></ion-icon>
              <ion-label>Profile Settings</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="navigateToPage('account')">
              <ion-icon slot="start" name="settings-outline"></ion-icon>
              <ion-label>Account Settings</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="navigateToPage('privacy')">
              <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
              <ion-label>Privacy Settings</ion-label>
            </ion-item>
          </ion-list>
        </div>

        <!-- Theme Section -->
        <div class="menu-section">
          <h2>THEME</h2>
          <ion-list lines="none">
            <ion-item button detail="false" (click)="setTheme('light')">
              <ion-icon slot="start" name="sunny-outline"></ion-icon>
              <ion-label>Light Mode</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="setTheme('dark')">
              <ion-icon slot="start" name="moon-outline"></ion-icon>
              <ion-label>Dark Mode</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="setTheme('custom')">
              <ion-icon slot="start" name="color-palette-outline"></ion-icon>
              <ion-label>Custom Mode</ion-label>
            </ion-item>
          </ion-list>
        </div>

        <!-- Help Section -->
        <div class="menu-section">
          <h2>HELP</h2>
          <ion-list lines="none">
            <ion-item button detail="false" (click)="navigateToPage('help')">
              <ion-icon slot="start" name="help-circle-outline"></ion-icon>
              <ion-label>Help Center</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="navigateToPage('report')">
              <ion-icon slot="start" name="warning-outline"></ion-icon>
              <ion-label>Report a Problem</ion-label>
            </ion-item>
            <ion-item button detail="false" (click)="navigateToPage('terms')">
              <ion-icon slot="start" name="document-text-outline"></ion-icon>
              <ion-label>Terms & Policies</ion-label>
            </ion-item>
          </ion-list>
        </div>

        <!-- Log Out Section -->
        <div class="menu-section">
          <h2>LOG OUT</h2>
          <ion-list lines="none">
            <ion-item button detail="false" (click)="lockApp()">
              <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
              <ion-label>Lock App</ion-label>
            </ion-item>
            <ion-item button detail="false" color="danger" (click)="logout()">
              <ion-icon slot="start" name="log-out-outline"></ion-icon>
              <ion-label>Exit</ion-label>
            </ion-item>
          </ion-list>
        </div>
      </div>
    </ion-content>
  </ion-menu>
  
  <ion-router-outlet id="main-content"></ion-router-outlet>
</ion-app>